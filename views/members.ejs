<%- include ('./partials/head') %>

<div class="content-wrapper">
    <%- include('./partials/heading') %>

    <main>
        <!-- Cards collection -->
        <section class="cards">

            <!-- If data is not present, default to no results found card -->
            <% if (sortedData == "") {%>
                <div class="card">
                    <div class="img-card">
                        <img src="./assets/default.png" alt="" class="card-image">
                        <div class="subinfo">
                            <p class="name">Geen resultaat gevonden</p>
                        </div>
                    </div>
                </div>
            <%
            }
            %>

            <!-- If data is present, make a card for each member based on API data -->
            <% sortedData.forEach(member => { %>
                <div class="flip-card">
                    <div class="flip-card-inner">
                                <% if (member.website){ %>
                <a href="<%= member.website %>">
            <% } else { %>
                <a href="https://programma.fdnd.nl/">
            <% } %>
                        <div class="card">
                            <div class="img-card">
                                <% 
                                    const avatarUrl = member.avatar
                                    // Filters for avatar URLs
                                    if (avatarUrl !== "null" && avatarUrl && !avatarUrl.includes("[") && !avatarUrl.includes("search")) { 
                                %>
                                    <img src="<%= member.avatar %>" alt="" class="card-image">
                                <% }else{ %>
                                    <img src="./assets/default.png" alt="" class="card-image">
                                <% } %>
                                <div class="subinfo">
                                    <p class="name"><%= member.name %></p>
                                    <p><%= member.city %></p>
                                    <p><%= member.age %></p>
                                </div>
                            </div>
                            <div class="info">
                                <div class="tags">
                                    <div class="tag">
                                        <p><%= member.squads[0].name %></p>
                                    </div>
                                    <div class="tag">
                                        <p><%= member.role %></p>
                                    </div>
                                    <div class="tag">
                                        <div class="stars">
                                            <p>
                                            <%-
                                                // console.log()
                                                member.publicRepos
                                            %>
                                            </p>
                                            <img src="./assets/star.svg" alt="Star icon" class="star">
                                        </div>
                                    </div>
                                    <div class="tag">
                                        <p><%= member.squads[0].cohort %></p>
                                    </div> 
                                </div>
                            </div>

                    </div>
                    <div class="card-back">
                        <% for (const [key, value] of Object.entries(member.bio || {})) {   %>
                            <p> <%- value %> </p>
                              <% } %>
                    </div>
                </div>
                


                </div>
                </a>
            <% }) %>
        </section>
    </main>
</div>

<%- include ('./partials/foot') %>